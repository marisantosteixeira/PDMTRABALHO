{
  "version": 3,
  "sources": ["../../workbox-routing/NavigationRoute.js", "../../workbox-routing/setDefaultHandler.js"],
  "sourcesContent": ["/*\r\n  Copyright 2018 Google LLC\r\n\r\n  Use of this source code is governed by an MIT-style\r\n  license that can be found in the LICENSE file or at\r\n  https://opensource.org/licenses/MIT.\r\n*/\r\nimport { assert } from 'workbox-core/_private/assert.js';\r\nimport { logger } from 'workbox-core/_private/logger.js';\r\nimport { Route } from './Route.js';\r\nimport './_version.js';\r\n/**\r\n * NavigationRoute makes it easy to create a\r\n * {@link workbox-routing.Route} that matches for browser\r\n * [navigation requests]{@link https://developers.google.com/web/fundamentals/primers/service-workers/high-performance-loading#first_what_are_navigation_requests}.\r\n *\r\n * It will only match incoming Requests whose\r\n * {@link https://fetch.spec.whatwg.org/#concept-request-mode|mode}\r\n * is set to `navigate`.\r\n *\r\n * You can optionally only apply this route to a subset of navigation requests\r\n * by using one or both of the `denylist` and `allowlist` parameters.\r\n *\r\n * @memberof workbox-routing\r\n * @extends workbox-routing.Route\r\n */\r\nclass NavigationRoute extends Route {\r\n    /**\r\n     * If both `denylist` and `allowlist` are provided, the `denylist` will\r\n     * take precedence and the request will not match this route.\r\n     *\r\n     * The regular expressions in `allowlist` and `denylist`\r\n     * are matched against the concatenated\r\n     * [`pathname`]{@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/pathname}\r\n     * and [`search`]{@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/search}\r\n     * portions of the requested URL.\r\n     *\r\n     * *Note*: These RegExps may be evaluated against every destination URL during\r\n     * a navigation. Avoid using\r\n     * [complex RegExps](https://github.com/GoogleChrome/workbox/issues/3077),\r\n     * or else your users may see delays when navigating your site.\r\n     *\r\n     * @param {workbox-routing~handlerCallback} handler A callback\r\n     * function that returns a Promise resulting in a Response.\r\n     * @param {Object} options\r\n     * @param {Array<RegExp>} [options.denylist] If any of these patterns match,\r\n     * the route will not handle the request (even if a allowlist RegExp matches).\r\n     * @param {Array<RegExp>} [options.allowlist=[/./]] If any of these patterns\r\n     * match the URL's pathname and search parameter, the route will handle the\r\n     * request (assuming the denylist doesn't match).\r\n     */\r\n    constructor(handler, { allowlist = [/./], denylist = [] } = {}) {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n            assert.isArrayOfClass(allowlist, RegExp, {\r\n                moduleName: 'workbox-routing',\r\n                className: 'NavigationRoute',\r\n                funcName: 'constructor',\r\n                paramName: 'options.allowlist',\r\n            });\r\n            assert.isArrayOfClass(denylist, RegExp, {\r\n                moduleName: 'workbox-routing',\r\n                className: 'NavigationRoute',\r\n                funcName: 'constructor',\r\n                paramName: 'options.denylist',\r\n            });\r\n        }\r\n        super((options) => this._match(options), handler);\r\n        this._allowlist = allowlist;\r\n        this._denylist = denylist;\r\n    }\r\n    /**\r\n     * Routes match handler.\r\n     *\r\n     * @param {Object} options\r\n     * @param {URL} options.url\r\n     * @param {Request} options.request\r\n     * @return {boolean}\r\n     *\r\n     * @private\r\n     */\r\n    _match({ url, request }) {\r\n        if (request && request.mode !== 'navigate') {\r\n            return false;\r\n        }\r\n        const pathnameAndSearch = url.pathname + url.search;\r\n        for (const regExp of this._denylist) {\r\n            if (regExp.test(pathnameAndSearch)) {\r\n                if (process.env.NODE_ENV !== 'production') {\r\n                    logger.log(`The navigation route ${pathnameAndSearch} is not ` +\r\n                        `being used, since the URL matches this denylist pattern: ` +\r\n                        `${regExp.toString()}`);\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n        if (this._allowlist.some((regExp) => regExp.test(pathnameAndSearch))) {\r\n            if (process.env.NODE_ENV !== 'production') {\r\n                logger.debug(`The navigation route ${pathnameAndSearch} ` + `is being used.`);\r\n            }\r\n            return true;\r\n        }\r\n        if (process.env.NODE_ENV !== 'production') {\r\n            logger.log(`The navigation route ${pathnameAndSearch} is not ` +\r\n                `being used, since the URL being navigated to doesn't ` +\r\n                `match the allowlist.`);\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport { NavigationRoute };\r\n", "/*\r\n  Copyright 2019 Google LLC\r\n\r\n  Use of this source code is governed by an MIT-style\r\n  license that can be found in the LICENSE file or at\r\n  https://opensource.org/licenses/MIT.\r\n*/\r\nimport { getOrCreateDefaultRouter } from './utils/getOrCreateDefaultRouter.js';\r\nimport './_version.js';\r\n/**\r\n * Define a default `handler` that's called when no routes explicitly\r\n * match the incoming request.\r\n *\r\n * Without a default handler, unmatched requests will go against the\r\n * network as if there were no service worker present.\r\n *\r\n * @param {workbox-routing~handlerCallback} handler A callback\r\n * function that returns a Promise resulting in a Response.\r\n *\r\n * @memberof workbox-routing\r\n */\r\nfunction setDefaultHandler(handler) {\r\n    const defaultRouter = getOrCreateDefaultRouter();\r\n    defaultRouter.setDefaultHandler(handler);\r\n}\r\nexport { setDefaultHandler };\r\n"],
  "mappings": ";;;;;;;;;;;;;;AA0BA,IAAM,kBAAN,cAA8B,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBhC,YAAY,SAAS,EAAE,YAAY,CAAC,GAAG,GAAG,WAAW,CAAC,EAAE,IAAI,CAAC,GAAG;AAC5D,QAAI,MAAuC;AACvC,yBAAO,eAAe,WAAW,QAAQ;AAAA,QACrC,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,UAAU;AAAA,QACV,WAAW;AAAA,MACf,CAAC;AACD,yBAAO,eAAe,UAAU,QAAQ;AAAA,QACpC,YAAY;AAAA,QACZ,WAAW;AAAA,QACX,UAAU;AAAA,QACV,WAAW;AAAA,MACf,CAAC;AAAA,IACL;AACA,UAAM,CAAC,YAAY,KAAK,OAAO,OAAO,GAAG,OAAO;AAChD,SAAK,aAAa;AAClB,SAAK,YAAY;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,OAAO,EAAE,KAAK,QAAQ,GAAG;AACrB,QAAI,WAAW,QAAQ,SAAS,YAAY;AACxC,aAAO;AAAA,IACX;AACA,UAAM,oBAAoB,IAAI,WAAW,IAAI;AAC7C,eAAW,UAAU,KAAK,WAAW;AACjC,UAAI,OAAO,KAAK,iBAAiB,GAAG;AAChC,YAAI,MAAuC;AACvC,iBAAO,IAAI,wBAAwB,iBAAiB,oEAE7C,OAAO,SAAS,CAAC,EAAE;AAAA,QAC9B;AACA,eAAO;AAAA,MACX;AAAA,IACJ;AACA,QAAI,KAAK,WAAW,KAAK,CAAC,WAAW,OAAO,KAAK,iBAAiB,CAAC,GAAG;AAClE,UAAI,MAAuC;AACvC,eAAO,MAAM,wBAAwB,iBAAiB,iBAAsB;AAAA,MAChF;AACA,aAAO;AAAA,IACX;AACA,QAAI,MAAuC;AACvC,aAAO,IAAI,wBAAwB,iBAAiB,mFAE1B;AAAA,IAC9B;AACA,WAAO;AAAA,EACX;AACJ;;;ACvFA,SAAS,kBAAkB,SAAS;AAChC,QAAM,gBAAgB,yBAAyB;AAC/C,gBAAc,kBAAkB,OAAO;AAC3C;",
  "names": []
}
